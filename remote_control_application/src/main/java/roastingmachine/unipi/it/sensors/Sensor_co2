package roastingmachine.unipi.it.sensors;

import roastingmachine.unipi.it.resources.ResourcesMan;
// IMPORTARE THREAD PER COMUNICAZIONE COAP

public class Sensor_co2 extends Utility_sensor{
    private static Sensor_co2 INSTANCE;

    private Sensor_co2() {
	    min = 500;
	    max = 1000;
    }

    public static Sensor_co2 getInstance() {
        if(INSTANCE == null) {
            INSTANCE = new Sensor_co2();
        }

        return INSTANCE;
    }

     public static Sensor_co2 getInstance() {
        if(INSTANCE == null) {
            INSTANCE = new Sensor_co2();
        }

        return INSTANCE;
    }

    public void setActionMin(){
    }

    public void setActionMax(){
        
           if(Sensor_co2.getInstance().getValue()>Sensor_co2.getInstance().getMax()+200){ //se la supera di piu di 200 parte l'alert
                ResourcesMan resourcesMan = ResourcesMan.retrieveInformation("alert");
                new CoapClient(resourcesMan, "on").start();
           }
            ResourcesMan resourcesMan = ResourcesMan.retrieveInformation("vent");
                new CoapClient(resourcesMan, "on").start();
        
            
    }

    public void setActionOK(){
        ResourcesMan resourcesMan = ResourcesMan.retrieveInformation("alert");
        if(resourcesMan.getStatus().equals("on")){
            new CoapClient(resourcesMan, "off").start();
        }
        ResourcesMan resourcesMan = ResourcesMan.retrieveInformation("vent");
        if(resourcesMan.getStatus().equals("on")){
            new CoapClient(resourcesMan, "off").start();
        }
    }

}


